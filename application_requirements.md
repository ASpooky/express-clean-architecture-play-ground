<!-- aiに出力させたプレイグラウンド用アプリケーション要件 -->
# 課題プロジェクト: 社内会議室予約システム API

## 1. アプリケーション概要
社員が会議室を検索し、特定の時間を指定して予約できるシステムです。
Clean Architecture の学習用として、**「時間の重複チェック」**や**「予約制限ルール」**といったビジネスロジックの実装に重点を置きます。

## 2. ドメインモデル (Entities)
`src/domain/entities` に実装する対象です。

| モデル名 | 説明 | 属性 (Properties) |
| :--- | :--- | :--- |
| **User** | 予約を行う社員 | `id`, `name`, `email` |
| **Room** | 会議室 | `id`, `name`, `capacity` (収容人数) |
| **Reservation** | 予約情報 | `id`, `userId`, `roomId`, `startTime`, `endTime`, `status` (確定/キャンセル) |

## 3. ユースケースとビジネスルール (Use Cases)
`src/usecase` に実装する機能要件です。

### ✅ UC1: 会議室を予約する (Reserve Room)
ユーザーが指定した会議室と時間帯で予約を作成します。

* **入力:** `userId`, `roomId`, `startTime`, `endTime`
* **ビジネスルール (ドメイン制約):**
    1.  **排他制御:** 指定した時間帯に、同じ会議室ですでに有効な予約が存在する場合は予約できない（重複禁止）。
    2.  **過去日禁止:** 現在時刻より過去の時間は予約できない。
    3.  **利用時間制限:** 1回の予約は「最低30分」以上、「最大3時間」までとする。

### ✅ UC2: 予約をキャンセルする (Cancel Reservation)
既存の予約をキャンセル状態にします。

* **入力:** `reservationId`, `requestingUserId` (リクエストしたユーザーID)
* **ビジネスルール:**
    1.  **所有者確認:** 予約した本人（`userId`）しかキャンセルできない。
    2.  **直前キャンセル禁止:** 予約開始時刻の「1時間前」を過ぎている場合はキャンセルできない。

### ✅ UC3: 空き会議室を検索する (Find Available Rooms)
指定した日時範囲で予約可能な会議室のリストを返します。

* **入力:** `startTime`, `endTime`
* **出力:** 予約可能な `Room` のリスト

## 4. アーキテクチャ・実装のポイント

### A. 依存性のルール (Dependency Rule)
* **Domain層**はいかなる外部ライブラリ（Express, Prismaなど）にも依存してはいけません。
* **UseCase層**は具体的なDB実装を知りません。`IRepository` インターフェース経由でデータを操作します。

### B. ロジックの配置
* 「3時間以内か？」のような単体データの整合性は **Entity (`Reservation`)** に記述することを推奨します。